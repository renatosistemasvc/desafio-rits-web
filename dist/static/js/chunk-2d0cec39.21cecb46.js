(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cec39"],{"619a":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("c-panel",[a("list")],1)],1)},i=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticClass:"u-mt-10 u-mb-20",attrs:{gutter:10}},[a("el-col",{attrs:{xs:24,sm:6,md:6}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"Data do Pedido",size:"small",type:"daterange","range-separator":"a","start-placeholder":"","end-placeholder":"",format:"dd/MM/yyyy","value-format":"yyyy-MM-dd"},on:{change:function(e){return t.loadingSale()}},model:{value:t.filtro.periodo,callback:function(e){t.$set(t.filtro,"periodo",e)},expression:"filtro.periodo"}})],1),a("el-col",{attrs:{xs:24,sm:10,md:10}},[a("el-input",{attrs:{size:"small",placeholder:"Pesquisar por cliente..."},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.loadingSale(e)}},model:{value:t.filtro.client_name,callback:function(e){t.$set(t.filtro,"client_name",e)},expression:"filtro.client_name"}})],1),a("el-col",{attrs:{xs:24,sm:8,md:8}},[a("el-select",{attrs:{clearable:"",size:"small",placeholder:"Status"},on:{change:t.loadingSale},model:{value:t.filtro.status,callback:function(e){t.$set(t.filtro,"status",e)},expression:"filtro.status"}},t._l(t.$CONSTANTS.STATUS_SALES,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:parseInt(e)}})})),1)],1)],1),a("div",{staticClass:"container-table"},[a("table",{directives:[{name:"loading",rawName:"v-loading",value:!t.statusList,expression:"!statusList"}],staticClass:"table table-striped"},[t._m(0),a("tbody",t._l(t.items,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.id))]),a("td",[t._v(t._s(e.client.name))]),a("td",[t._v(t._s(t.$moment(e.date).format("DD/MM/YYYY HH:mm:ss")))]),a("td",[t._v("R$ "+t._s(t.formatPrice(e.price_sale)))]),a("td",[t._v(t._s(t.$CONSTANTS.STATUS_SALES[e.status]))]),a("td",{staticClass:"u-text-center acao"},[a("el-button",{attrs:{title:"Alterar Status do Pedido",type:"primary",size:"mini"},on:{click:function(a){return t.showFormUpdateStatus(e)}}},[a("i",{staticClass:"fas fa-exchange-alt"})]),a("el-button",{attrs:{title:"Visualizar Detalhes",type:"info",size:"mini"},on:{click:function(a){return t.showInfo(e)}}},[a("i",{staticClass:"fas fa-search"})]),a("el-button",{attrs:{title:"Excluir",type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.deleteSale(e.id)}}})],1)])})),0)]),t.statusList?a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:24,sm:12,md:12}},[a("div",{staticClass:"u-text-left u-mt-10"},[t._v(" Mostrando "+t._s(t.paginate.from)+" até "+t._s(t.paginate.to)+" de "+t._s(t.paginate.qtdItens)+" registros encontrados. ")])]),t.paginate.qtdItens>20?a("el-col",{attrs:{xs:24,sm:12,md:12}},[a("div",{staticClass:"u-text-right"},[a("el-pagination",{staticClass:"u-mt-10",attrs:{"current-page":t.paginate.page,total:t.paginate.qtdItens,"page-size":20,background:"",layout:"prev, pager, next",small:""},on:{"current-change":t.getPagePagination}})],1)]):t._e()],1):t._e()],1),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"DETALHES DO PEDIDO",width:"40%",visible:t.dialogInfoSale},on:{"update:visible":function(e){t.dialogInfoSale=e}}},[t.dialogInfoSale?a("div",[0!==Object.keys(t.saleSelected).length?a("div",[a("el-row",{staticClass:"u-mt-20",attrs:{gutter:10}},[a("el-col",{attrs:{xs:24,sm:24,md:24}},[a("dl",[a("dt",[t._v("CLIENTE:")]),a("dd",[t._v(t._s(t.saleSelected.client.name))])])])],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:24,sm:24,md:24}},[a("dl",[a("dt",[t._v("data:")]),a("dd",[t._v(t._s(t.$moment(t.saleSelected.date).format("DD/MM/YYYY HH:mm:ss")))])])])],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:24,sm:24,md:24}},[a("dl",[a("dt",[t._v("VALOR TOTAL:")]),a("dd",[t._v("R$ "+t._s(t.formatPrice(t.saleSelected.price_sale)))])])])],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:24,sm:24,md:24}},[a("dl",[a("dt",[t._v("STATUS:")]),a("dd",[t._v(t._s(t.$CONSTANTS.STATUS_SALES[t.saleSelected.status]))])])])],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{staticClass:"u-text-right",attrs:{xs:24}},[a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){t.dialogInfoSale=!1}}},[t._v("FECHAR")])],1)],1)],1):t._e()]):t._e()]),a("el-dialog",{attrs:{"close-on-click-modal":!1,title:"ALTERAR STATUS DO PEDIDO",width:"30%",visible:t.dialogUpdateStatus},on:{"update:visible":function(e){t.dialogUpdateStatus=e},close:function(e){return t.resetFormUpdateStatus()}}},[t.dialogUpdateStatus?a("div",[a("el-form",{ref:"formUpdateStatus",attrs:{model:t.formUpdateStatus,"label-position":"top"},nativeOn:{submit:function(e){return e.preventDefault(),t.onSubmitUpdateStatus(e)}}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:24,sm:24,md:24}},[a("el-form-item",{key:"status",attrs:{label:"Status",prop:"status",rules:[t.$requiredChange]}},[a("el-select",{model:{value:t.formUpdateStatus.status,callback:function(e){t.$set(t.formUpdateStatus,"status",e)},expression:"formUpdateStatus.status"}},t._l(t.$CONSTANTS.STATUS_SALES,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:parseInt(e)}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{xs:24}},[a("el-form-item",{staticClass:"u-text-right u-mt-15"},[a("el-button",{attrs:{type:"primary","native-type":"submit"}},[t._v("SALVAR")])],1)],1)],1)],1)],1):t._e()])],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{width:"70px"}},[t._v("Cod.")]),a("th",[t._v("Cliente")]),a("th",[t._v("Data")]),a("th",[t._v("Valor")]),a("th",[t._v("Status")]),a("th",{staticClass:"u-text-center",staticStyle:{width:"150px"}},[t._v("Ação")])])])}],r={data:()=>({dialogInfoSale:!1,dialogUpdateStatus:!1,statusList:!1,filtro:{client_name:"",status:"",periodo:[]},paginate:{page:1,qtdItens:null,from:"",to:""},items:[],saleSelected:{},formUpdateStatus:{sale_id:"",status:""}}),mounted(){this.loadingSale()},methods:{onSubmitUpdateStatus(){this.$refs.formUpdateStatus.validate(t=>{t?(window.eventBus.$emit("loading",!0),this.$axios.post(this.$store.state.baseUrlApi+"/api/sale/updateStatus",this.formUpdateStatus,this.$store.getters.getHeaderAuthAdmin).then(t=>{window.eventBus.$emit("loading",!1),window.eventBus.$emit("alert",{msg:"Sucesso! - Operação realizada com Sucesso!",type:"success"}),this.dialogUpdateStatus=!1,this.loadingSale()}).catch(t=>{this.$store.commit("throwException",t)})):this.$message({message:"Campos obrigatórios não foram preenchidos.",type:"warning",duration:5e3})})},showFormUpdateStatus(t){this.formUpdateStatus.status=t.status,this.formUpdateStatus.sale_id=t.id,this.dialogUpdateStatus=!0},showInfo(t){this.saleSelected=t,this.dialogInfoSale=!0},loadingSale(){this.statusList=!1,this.items=[],this.$axios.post(this.$store.state.baseUrlApi+"/api/sale/getAllPaginate/20?page="+this.paginate.page,this.filtro,this.$store.getters.getHeaderAuthAdmin).then(t=>{this.items=t.data.data,this.paginate.qtdItens=t.data.total,this.paginate.from=t.data.from,this.paginate.to=t.data.to,this.statusList=!0}).catch(t=>{this.$store.commit("throwException",t)})},deleteSale(t){this.$msgbox.confirm("Tem certeza que deseja excluir este pedido?","Atenção",{confirmButtonText:"Sim",cancelButtonText:"Não",type:"warning"}).then(()=>{window.eventBus.$emit("loading",!0),this.$axios.delete(this.$store.state.baseUrlApi+"/api/sale/delete/"+t,this.$store.getters.getHeaderAuthAdmin).then(t=>{window.eventBus.$emit("loading",!1),window.eventBus.$emit("alert",{msg:"Sucesso! - Operação realizada com Sucesso!",type:"success"}),this.loadingSale()}).catch(t=>{this.$message({message:"Ocorreu um erro!.",type:"warning",duration:5e3})})}).catch(()=>{})},getPagePagination(t){this.paginate.page=t,this.loadingSale()},formatPrice(t){if(!t)return"-";let e=(t/1).toFixed(2).replace(".",",");return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},resetFormUpdateStatus(){this.formUpdateStatus={sale_id:"",status:""}}}},n=r,d=a("2877"),u=Object(d["a"])(n,l,o,!1,null,null,null),c=u.exports,m={components:{list:c}},p=m,g=Object(d["a"])(p,s,i,!1,null,null,null);e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-2d0cec39.21cecb46.js.map